"use strict";(self.webpackChunkAI_things=self.webpackChunkAI_things||[]).push([[919],{919:(Z,p,i)=>{i.r(p),i.d(p,{ChattingModule:()=>I});var u=i(6895),m=i(294),g=i(672),f=i(9300),d=i(8505),v=i(3900),C=i(262),M=i(9646),c=i(4854),t=i(8256),x=i(4461),y=i(3066),A=i(6858),h=i(433),w=i(4929);const S=[{path:"",component:(()=>{class n{constructor(o,e,s){this.promptService=o,this.showLoadingService=e,this.httpService=s,this.title=c.Q1,this.prompt$=this.promptService.getPrompt(),this.question="",this.answer="",this.buttonTitle=c._y,this.checkQuestionLength=()=>this.question.length<5}ngOnInit(){this.listenInput(),this.inputElement=document.querySelector(".question")}askQuestion(){this.promptService.setPrompt(this.question)}listenInput(){this.subscription=this.prompt$.pipe((0,f.h)(r=>""!==r.trim()),(0,d.b)(r=>{this.showLoadingService.hide(),console.log("val:",r)}),(0,d.b)(()=>{this.showLoadingService.show(),this.inputElement?.blur()}),(0,v.w)(r=>{console.log(r);const T=JSON.stringify({user_app_id:{user_id:"clarifai",app_id:"LLM-OpenSource-Models-Training-Inference-Test"},inputs:[{data:{text:{raw:r}}}]});return this.httpService.postData("https://api.clarifai.com/v2/models/tiiuae-falcon-7b-instruct/versions/c01f38d7e6764b1eb836b1f7bc6c0472/outputs",T,{headers:{Accept:"application/json",Authorization:"Key "+c.$h}})}),(0,C.K)(r=>(console.log(r),this.showLoadingService.hide(),this.listenInput(),(0,M.of)([])))).subscribe({next:r=>{this.showLoadingService.hide(),this.processData(r)},error:r=>{this.showLoadingService.hide(),this.processData(null,!0)}})}processData(o,e=!1){console.log(o);let s="";const a=o?.outputs?.[0]?.data?.text?.raw;s=a&&!e?a.slice(this.question.length+1):"Error! Try again please!",this.writeAnswer(s)}writeAnswer(o){let e=0,a=setInterval(()=>{this.answer=o.slice(0,e),e<o.length-1?e++:clearInterval(a)},50)}ngOnDestroy(){this.subscription?.unsubscribe()}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(x.l),t.Y36(y.O),t.Y36(A.O))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-chatting"]],decls:10,vars:14,consts:[["cols","30","rows","5",1,"question",3,"ngModel","ngModelChange","input"],[1,"button-ask",3,"pointerdown"],["cols","30","rows","5","readonly","",1,"answer",3,"ngModel","ngModelChange"]],template:function(o,e){1&o&&(t.TgZ(0,"p"),t._uU(1),t.ALo(2,"async"),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"textarea",0),t.NdJ("ngModelChange",function(a){return e.question=a})("input",function(){return[e.answer=""]}),t.qZA(),t.TgZ(5,"div",1),t.NdJ("pointerdown",function(){return e.askQuestion()}),t._uU(6),t.ALo(7,"async"),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"textarea",2),t.NdJ("ngModelChange",function(a){return e.answer=a}),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,6,t.lcZ(3,8,e.title))),t.xp6(3),t.Q6J("ngModel",e.question),t.xp6(1),t.ekj("disabled",e.checkQuestionLength()),t.xp6(1),t.hij(" ",t.lcZ(7,10,t.lcZ(8,12,e.buttonTitle)),"\n"),t.xp6(3),t.Q6J("ngModel",e.answer))},dependencies:[h.Fj,h.JJ,h.On,u.Ov,w.X],styles:["[_nghost-%COMP%]{color:#999;height:85vh;font-size:20px;font-family:Segoe Print;display:flex;flex-direction:column;align-items:center;justify-content:space-around;gap:20px}textarea[_ngcontent-%COMP%]{font-size:20px;font-family:Segoe Print;color:#090;max-width:300px!important;max-height:200px!important;text-align:justify;padding:10px}.button-ask[_ngcontent-%COMP%]{width:100px;height:50px;display:flex;align-items:center;justify-content:center;border:2px solid #090;border-radius:5px;color:#999;cursor:pointer}.button-ask[_ngcontent-%COMP%]:hover{color:#090}.disabled[_ngcontent-%COMP%]{cursor:auto;opacity:.3}.disabled[_ngcontent-%COMP%]:hover{color:#999}@media (max-height: 500px){[_nghost-%COMP%]{flex-direction:row;margin-top:50px}}"]}),n})()}];let O=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[g.Bz.forChild(S),g.Bz]}),n})(),I=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[u.ez,m.I,O,h.u5]}),n})()}}]);